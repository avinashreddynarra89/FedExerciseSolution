
(function(){
	'use strict';
	
	var app = angular.module('flickrSolution',['ui.router','ui.bootstrap','ngCookies','ngResource']);
	
	app.config(['$stateProvider','$urlRouterProvider','$httpProvider', function ($stateProvider,$urlRouterProvider,$mdThemingProvider,$httpProvider){
		$urlRouterProvider.otherwise('/flickr');
		
		$stateProvider.state('flickr' , {
			url:'/flickr',
			templateUrl: 'app/flickrMainPage/flickr.html',
			controller: 'FlickrController'
			
		});
	}]);
	
	
	app.run(function($rootScope, $location, $state, $stateParams) {
		console.log('Run');
		//getConfig.getConfigurationJson();
		
		 $rootScope.$on('$stateChangeSuccess', function(event, toState, toParams, fromState, fromParams){ 
	           
	        })
	        $rootScope.$on('$stateChangeStart', function(event, toState, toParams, fromState, fromParams, options){ 
	            
	        })

	        $rootScope.$on('$stateChangeError', function(event, toState, toParams, fromState, fromParams, error){ 
	            
	        })
	        
	        $rootScope.$on('$locationChangeSuccess', function(event, absUrl, oldUrl, locationState, oldState) {
				
	        
				
				
			})
		
	});
	

	
	
})();
(function() {
	'use strict';
	angular.module('flickrSolution')
	.constant('FlickrConstants',{
		
		ApiKey :'a5e95177da353f58113fd60296e1d250',
		UserId:'24662369@N07',
		BaseURI : 'https://api.flickr.com/services/rest/'
	});
	
})();
(function(){
	
	'use strict';
	
	angular.module('flickrSolution').factory('FlickrService',FlickrService);
	
	FlickrService.$inject = ['$http','$rootScope','FlickrConstants'];
	
	function FlickrService($http,$rootScope,FlickrConstants)
	{
		var service = {
				
				fetchImages : fetchImages
		};
		
		function fetchImages(successCallBack,errorCallBack)
		{
			var _url= FlickrConstants.BaseURI+"?method=flickr.people.getPublicPhotos&api_key="+FlickrConstants.ApiKey+"&user_id="
						+FlickrConstants.UserId+"&format=json&nojsoncallback=1";
			$http({
				method : 'GET',
				url : _url,
				cache : false
			}).success(function(data, status, headers, config) {
				if (status === 200) {
					successCallBack(data);
				} else {
					errorCallBack(data);
				}
			}).error(function(data, status, headers, config) {
				errorCallBack(data);
			});
			
		}
		

		return service;
	}	
})();

(function(){
	'use strict';
	
	angular.module('flickrSolution').controller('FlickrController',FlickrController);
	
	FlickrController.$inject = ['$scope','$rootScope','FlickrService'];
	
	function FlickrController ($scope,$rootScope,FlickrService){
		
		FlickrService.fetchImages(successData,errorData);
		
		function successData(response)
		{
			$scope.photos = response.photos.photo;
		}
		
		function errorData(response)
		{
			
		}
		$scope.sortByAplhabetical = 'title';
		
		function render()
		{
			
		}
		render();


		
	}
})();